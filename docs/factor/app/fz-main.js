(()=>{var t={847:(t,e)=>{function r(t,e){return t<0&&e<0?-n(Math.abs(t),Math.abs(e)):n(Math.abs(t),Math.abs(e))}function n(t,e){if(e>t)return r(e,t);for(var n=t,i=e;0!=i;){var a=i;i=n%i,n=a}return n}function i(t,e){if(t<=0||e<=0)throw new Error("out of range");for(var r=t,n=e,i=1,a=0,o=0,s=1;n>0;){var u=Math.trunc(r/n),h=r%n,d=i-u*a,f=o-u*s;r=n,n=h,i=a,a=d,o=s,s=f}return[i,o,r]}e.gcdInt=r,e.exgcd=i,e.lcmInt=function(t,e){return t*e/r(t,e)},e.inverse=function(t,e){var r=i(t=(t%e+e)%e,e);if(1==r[2])return(r[0]+e)%e;throw new Error("gcd is not 1")}},715:(t,e,r)=>{function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=r(7),a=r(847),o=r(99),s=r(841),u=i.Polynomial,h=i.PolynomialMP,d=(a.inverse,o.Sosu),f=o.MulCMB,c=s.TinyMTJS;function l(t,e){for(var r=0;r<t.length;r++)if(t[r].equal(e))return t;return t.push(e),t}function v(t,e){return e.canBeMonic()&&(e=e.toMonic()),l(t,e)}function g(t,e){for(var r=t.concat(),n=0;n<e.length;n++)r=l(r,e[n]);return r}function m(t,e,r,n){for(var i=new Array(e+1),a=0;a<=e;a++){var o=n.getInt(r);i[a]=o}for(;0==i[e];)i[e]=n.getInt(r-1)+1;return new h(t,i,r)}function w(t,e,r){for(var n=t.concat(),i=e/2,a=0;a<n.length;a++)n[a]=n[a]*r%e,n[a]>i&&(n[a]=n[a]-e);return n}function y(t,e){for(var r=0,n=e.divrem(t);n[1].isZero();)r++,n=(e=n[0]).divrem(t);return[[t,r],e]}function k(t,e){for(var r=[],n=0;n<t.length;n++){var i=y(t[n],e);r.push(i[0]),e=i[1]}return[r,e]}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.original=e;var r=e.gcdKPX();this.gcdK=r[0],this.gcdP=r[1],this.free=this.gcdP.squareFree(),this.resultFactors=[],this.tinymt=new c(e.ar)}var e,r;return e=t,r=[{key:"selectPrime",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=d.getPrimes(),i=1,a=1;a<n.length&&!(n[a]>=r);a++)if(t%n[a]!=0&&n[a]>=e){i=n[a];break}return i}},{key:"selectPrimeN",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=d.getPrimes(),i=100,a=[],o=0,s=2*e;o<e;){var u=this.tinymt.getInt(s)%Math.min(n.length,i),h=n[u];t%h!=0&&h>=r&&(a.includes(h)?s+=1:(a.push(h),o++))}return a}},{key:"kz",value:function(t,e){var r=new h(t.indet,[1],e),n=[t];return(n=function(t,e){for(var r=t.concat(),n=0;n<e.length;n++)r=v(r,e[n]);return r}(n,this.kz1(t,e,r))).sort((function(t,e){return t.gt(e)}))}},{key:"kz1",value:function(t,e,r){var n=t.deg();if(n<=1)return[t];for(var i=[],a=0,o=0,s=10*n,u=function(e){var r=t.gcd(e).toMonic();if(r.deg()<1)a++;else if(i.find((function(t){return t.equal(r)})))a++;else{a=0,o++,i=l(i,r);var n=t.divRem(r)[0].toMonic();i=l(i,n)}};a<200&&o<s;){var h=m(t.indet,n-1,e,this.tinymt);u(h);var d=h.add(r);u(d),u(d=h.sub(r))}i=i.sort((function(t,e){return t.gt(e)}));for(var f=[],c=0;c<i.length;c++)f=g(f,this.kz1(i[c],e,r));return g(i,f)}},{key:"lift",value:function(t,e,r,n,i,a){var o=i,s=1,u=t.mul(e);if(!u.equal(r))throw new Error("gb * hb != fb");var d=(u=t.exGcd(e))[0],f=u[1];if(0!=u[2].deg())return!1;for(var c=t,l=e,v=c,g=l;Math.pow(o,s)<a;){var m=Math.pow(o,s+1),w=h.fromPolynomial(n,m,o);c=c.toNewMod(m),l=l.toNewMod(m),w=(w=w.toNewMod(m)).sub(c.mul(l)),d=d.toNewMod(m),f=f.toNewMod(m),v=v.toNewMod(m);var y=(u=w.mul(f).divRem(v))[0],k=u[1];u=(g=g.toNewMod(m)).mul(y);var b=w.mul(d).add(g.mul(y));c=c.add(k),l=l.add(b),s+=1}return c}},{key:"liftFactors",value:function(t,e,r,n,i){for(var a=[],o=0;o<t.length;o++){var s,u=t[o],h=e.divRem(u)[0];0!=u.deg()&&0!=h.deg()&&(s=this.lift(u,h,e,r,n,i))&&(v(a,s),h=h.toMonic(),u=e.divRem(h)[0],v(a,s=this.lift(h,u,e,r,n,i)))}return a}},{key:"checkAndm",value:function(t,e,r){if(t.deg()>e.deg())return!1;t.mod;for(var n=!1,i=(t.mod,1),a=!1,o=new f(r).getList(),s=0;s<o.length;s++){var h=w(t.ar,t.mod,o[s]);if(a=new u(t.indet,h),(d=e.divrem(a))[1].isZero()){n=d[0];break}}if(!n)return!1;for(;;){var d;if(!(d=n.divrem(a))[1].isZero())break;n=d[0],i++}return[a,i,n]}},{key:"checkFactors",value:function(t,e){for(var r=[],n=d.integerFactorize(e.leadingK()),i=0;i<t.length;i++){var a=this.checkAndm(t[i],e,n);if(a&&(r.push(a),e=a[2]),0==e.deg())break}return e.deg()>0&&r.push([e,1]),r}},{key:"factorize",value:function(){var t=this.original.gcdKPX();this.gcdK=t[0],this.gcdP=t[1];var e,r,n=[[this.gcdK,1]],i=(e=this.gcdP,r=function(t){t=t.gcdKPX()[1];for(var e=d.integerFactorize(Math.abs(t.leadingK())),r=d.integerFactorize(Math.abs(t.tailingK())),n=new f(e),i=new f(r),a=t.indet,o=[];!n.done();){var s=n.next();for(i.reset();!i.done();){var h=i.next(),c=new u(a,[h,s]),v=t.divrem(c);v[1].isZero()&&(o=l(o,c)),c=new u(a,[-h,s]),(v=t.divrem(c))[1].isZero()&&(o=l(o,c))}}return o}(e),k(r,e)),a=i[0];a=a.sort((function(t,e){return t[0].gt(e[0])}));var o=i[1];if(this.free=o.squareFree(),0==this.free.deg())return this.resultFactors=n.concat(a),this.success=!0,!0;var s=this.fz1(this.free,o);return s=(s=s.concat(a)).sort((function(t,e){return t[0].gt(e[0])})),this.resultFactors=n.concat(s),this.success=!0,!0}},{key:"fz1",value:function(t,e){if(e.deg()<=1)return[[e,1]];if(t.deg()<=1)return k([t],e)[0];for(var r=new Array(3),n=this.free.leadingK(),i=this.selectPrimeN(n,3),a=0;a<3;a++)r[a]=this.fz2(t,e,i[a]);if(function(t){for(var e=t.length,r=1;r<e;r++){if(t[0].length!=t[r].length)return!1;for(var n=0;n<t[r].length;n++){var i=t[0][n],a=t[r][n];if(!i[0].equal(a[0])||i[1]!=a[1])return!1}}return!0}(r))return r[0];var o=function(t){for(var e=[],r=(t.length,0);r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n][0].deg()<=1&&(e=l(e,t[r][n][0]));for(r=0;r<t[0].length;r++){var i=t[0][r][0];if(!(i.deg()<=1)){var a=!0;for(n=1;n<t.length;n++)if(!t[n].find((function(t){return i.equal(t[0])}))){a=!1;break}a&&(e=l(e,i))}}return e}(r);if(o.length>0){var s=k(o,e),u=s[0];return 0==(e=s[1]).deg()?u:(t=e.squareFree(),u.concat(this.fz1(t,e)))}var h=function(t){for(var e=t[0].length,r=t[0],n=t.length,i=1;i<n;i++)t[i].length>e&&(e=t[i].length,r=t[i]);return r}(r),d=[];for(a=0;a<h.length;a++){var f=h[a][0],c=f.squareFree();d=d.concat(this.fz1(f,c))}return d}},{key:"fz2",value:function(t,e,r){t.deg();var n=2*t.maxK(),i=(t.leadingK(),h.fromPolynomial(t,r)),a=this.kz(i,r);a=a.sort((function(t,e){return t.gt(e)}));var o=this.liftFactors(a,i,t,r,n);if(o&&o.length>0){o=o.sort((function(t,e){return t.gt(e)}));var s=this.checkFactors(o,e);return s.sort((function(t,e){return t[0].gt(e[0])}))}return[[e,1]]}},{key:"getFactors",value:function(){return this.resultFactors}},{key:"getStringFactors",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e="",r=this.resultFactors[0][0],n=r.leadingK(),i=r.deg();if(1!=n||i>0)e+=r.toString();else if(2==this.resultFactors.length&&1==this.resultFactors[1][1])return t?this.resultFactors[1][0].toDescString():this.resultFactors[1][0].toString();for(var a=1;a<this.resultFactors.length;a++){var o=this.resultFactors[a];e=t?e+"("+o[0].toDescString()+")":e+"("+o[0].toString()+")",1!=o[1]&&(e=e+"^"+o[1])}return e}}],r&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.KZ=b},7:(t,e,r)=>{function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=r(847),s=o.gcdInt,u=o.lcmInt,h=(o.exgcd,o.inverse);function d(t){for(var e=t.length-1;e>=0;e--)if(0!=t[e])return e;return-1}function f(t,e){var r=d(t);if(r!=d(e))return!1;if(-1==r)return!0;for(var n=0;n<=r;n++)if(t[n]!=e[n])return!1;return!0}function c(t,e){var r=d(e);if(-1==r)return"0";for(var n="",i="",a=0;a<=r;a++)if(0!=e[a]){if(0!=a&&1==e[a]?n+=i:0!=a&&-1==e[a]?n+="-":e[a]<0?n+=e[a]:n=n+i+e[a],i="+",0==a)continue;if(n+=t,1==a)continue;n=n+"^"+a.toString()}return n}function l(t,e){for(var r=0;r<t.length;r++)t[r]=(t[r]%e+e)%e}function v(t){for(var e=t.length-1;e>=0;e--)if(0!=t[e])return t[e];return-1}function g(t){for(var e=Math.abs(t[0]),r=1;r<t.length;r++)Math.abs(t[r])>e&&(e=Math.abs(t[r]));return e}function m(t,e){var r,n,i,a=d(t),o=d(e);a>=o?(i=o,r=t.concat(),n=e):(i=a,r=e.concat(),n=t);for(var s=0;s<=i;s++)r[s]=r[s]+n[s];return r}function w(t,e){var r=d(t),n=d(e);if(r>n)return 1;if(r<n)return-1;for(var i=r;i>=0;i--)if(t[i]!=e[i])return 0==t[i]&&0!=e[i]?-1:0==e[i]&&0!=t[i]?1:t[i]<0&&e[i]>0?-1:e[i]<0&&t[i]>0?1:Math.abs(t[i])-Math.abs(e[i]);return 0}function y(t,e,r,n){d(t);var i=d(e);if(t.length<i+n+1)throw new Error("invalid degree");for(var a=0;a<=i;a++)t[a+n]=t[a+n]+r*e[a]}function k(t,e){var r,n,i,a,o=d(t),s=d(e);if(o>=s)i=s,r=t.concat(),a=-1,n=e;else{i=o,r=e.concat(),a=1,n=t;for(var u=0;u<r.length;u++)r[u]=-r[u]}for(u=0;u<=i;u++)r[u]=r[u]+a*n[u];return r}function b(t,e){for(var r=t.concat(),n=0;n<r.length;n++)r[n]=r[n]/e;return r}function p(t){var e=d(t);if(-1==e)return 0;var r=t[e];if(1==Math.abs(r))return r;for(var n=0;n<e;n++)if(0!=t[n]){if(1==Math.abs(t[n]))return Math.sign(t[e]);r=s(r,t[n])}return Math.sign(t[e])*Math.abs(r)}function M(t,e){for(var r=new Array(t+1),n=0;n<=t;n++){var i=Math.trunc(Math.random()*e),a=1-2*Math.trunc(2*Math.random());r[n]=a*i}for(;0==r[t];)r[t]=Math.trunc(Math.random()*e);return r}var K=function(){function t(e,r){n(this,t),this.indet=e,this.ar=r.concat()}return a(t,[{key:"deg",value:function(){return d(this.ar)}},{key:"isTanko",value:function(){return function(t){for(var e=d(t)-1;e>=0;e--)if(0!=t[e])return!1;return!0}(this.ar)}},{key:"equal",value:function(t){return this.indet==t.indet&&f(this.ar,t.ar)}},{key:"isZero",value:function(){return-1==this.deg()}},{key:"leadingK",value:function(){return v(this.ar)}},{key:"tailingK",value:function(){return this.ar[0]}},{key:"toString",value:function(){return c(this.indet,this.ar,this.deg())}},{key:"toDescString",value:function(){return function(t,e){var r=d(e);if(-1==r)return"0";for(var n="",i="",a=r;a>=0;a--)if(0!=e[a]){if(0!=a&&1==e[a]?n+=i:0!=a&&-1==e[a]?n+="-":e[a]<0?n+=e[a]:n=n+i+e[a],i="+",0==a)continue;if(n+=t,1==a)continue;n=n+"^"+a.toString()}return n}(this.indet,this.ar,this.deg())}},{key:"kmulxn",value:function(e,r){for(var n=new Array(this.deg()+r+1),i=0;i<=this.deg();i++)n[i+r]=this.ar[i]*e;for(i=0;i<r;i++)n[i]=0;return new t(this.indet,n)}},{key:"add",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");var r=m(this.ar,e.ar);return new t(this.indet,r)}},{key:"sub",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");var r=k(this.ar,e.ar);return new t(this.indet,r)}},{key:"gt",value:function(t){if(this.indet!=t.indet)throw new Error("indetermint mismatch");return w(this.ar,t.ar)}},{key:"mul",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");if(this.isZero()||e.isZero())return new t(this.indet,[0]);for(var r=e.deg(),n=new Array(this.deg()+r+1).fill(0),i=0;i<=r;i++){var a=e.ar[i];0!=a&&y(n,this.ar,a,i)}return new t(this.indet,n)}},{key:"maxK",value:function(){return g(this.ar)}},{key:"gcdK",value:function(){return p(this.ar)}},{key:"gcdKP",value:function(){for(var e=this.gcdK(),r=this.ar.concat(),n=0;n<=this.deg();n++)r[n]=r[n]/e;return[e,new t(this.indet,r)]}},{key:"gcdKPX",value:function(){for(var e=this.gcdK(),r=0,n=0;n<=this.deg();n++)if(0!=this.ar[n]){r=n;break}var i=new Array(r+1).fill(0);i[r]=e;var a=new t(this.indet,i);return[a,this.divrem(a)[0]]}},{key:"d",value:function(){var e=this.deg();if(e<=0)return new t(this.indet,[0]);for(var r=new Array(e),n=1;n<=e;n++)r[n-1]=this.ar[n]*n;return new t(this.indet,r)}},{key:"modK",value:function(e){if(e<=1)throw new Error("zero divide");var r=this.ar.concat();return l(r,e),new t(this.indet,r)}},{key:"divrem",value:function(e){if(this.indet!=e.indet)throw console.log("this.indet = "+this.indet),console.log("pol.indet = "+e.indet),new Error("indetermint mismatch");if(e.isZero())throw new Error("zero divide");if(this.deg()<e.deg())return[new t(this.indet,[0]),new t(this.indet,this.ar)];var r=v(this.ar),n=v(e.ar);if(r%n!=0)return[new t(this.indet,[0]),new t(this.indet,this.ar)];var i=this.deg()-e.deg(),a=new Array(i+1).fill(0);a[i]=r/n;for(var o=this.sub(e.kmulxn(r/n,i));i>0;){if(i=o.deg()-e.deg(),(r=o.leadingK())%n!=0||i<0)return[new t(this.indet,a),o];a[i]=r/n,o=o.sub(e.kmulxn(r/n,i))}return[new t(this.indet,a),o]}},{key:"remX",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");if(e.isZero())throw new Error("zero divide");if(this.deg()<e.deg())return new t(this.indet,this.ar);var r=this.leadingK(),n=e.leadingK(),i=this.deg()-e.deg(),a=new Array(i+1).fill(0),o=new t(this.indet,this.ar);if(r%n!=0){var s=u(r,n)/r;r*=s,o=o.kmulxn(s,0)}for(a[i]=r/n,o=o.sub(e.kmulxn(r/n,i));i>0&&!o.isZero()&&!((i=o.deg()-e.deg())<0);){if((r=o.leadingK())%n!=0){var h=u(r,n)/r;r*=h,o=o.kmulxn(h,0)}a[i]=r/n,o=o.sub(e.kmulxn(r/n,i))}return o.gcdKP()[1]}},{key:"gcd",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");var r=this,n=e,i=(u=this.gcdKP())[0];r=u[1];var a=(u=e.gcdKP())[0];n=u[1];var o=s(i,a);if(n.deg()>r.deg())return n.gcd(r);if(n.deg()==r.deg()&&n.leadingK()>r.leadingK())return n.gcd(r);for(;!n.isZero();){var u=n;if((n=r.divrem(n)[1]).deg()>=r.deg())return new t(this.indet,[o]);r=u}return 0==r.deg()&&-1==r.leadingK()?new t(this.indet,[1]):r.kmulxn(o,0)}},{key:"gcdX",value:function(e){if(this.indet!=e.indet)throw new Error("indetermint mismatch");var r=this,n=e,i=(u=this.gcdKP())[0];r=u[1];var a=(u=e.gcdKP())[0];n=u[1];var o=s(i,a);if(n.deg()>r.deg())return n.gcd(r);if(n.deg()==r.deg()&&n.leadingK()>r.leadingK())return n.gcdX(r);for(;!n.isZero();){var u=n;n=r.remX(n),r=u}return 0==r.deg()?new t(this.indet,[1]):r.kmulxn(o,0)}},{key:"squareFree",value:function(){var e,r=this.d().gcdKP()[1],n=this.gcdX(r);return n.deg()>0?(e=this.divrem(n))[0].isZero()?new t((e=this.gcdKP()[1]).indet,e.ar):e[0]:new t((e=this.gcdKP()[1]).indet,e.ar)}}],[{key:"fromString",value:function(e){for(var r=e.split(/[:,]/),n=r[0],i=new Array(r.length-1),a=1;a<r.length;a++)i[a-1]=parseInt(r[a]);return new t(n,i)}},{key:"getRandom",value:function(e,r,n){if(r=Math.trunc(r),n=Math.trunc(n),r<1)throw new Error("deg too small");if(n<2)throw new Error("max too small");return new t(e,M(r,n))}}]),t}(),P=function(){function t(e,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;n(this,t),this.indet=e,this.ar=r.concat(),this.mod=i,this.base=a,this.standard()}return a(t,[{key:"toPolynomial",value:function(){return new K(this.indet,this.ar)}},{key:"equal",value:function(t){return this.indet==t.indet&&this.mod==t.mod&&f(this.ar,t.ar)}},{key:"toNewMod",value:function(e){if(e%this.base!=0)throw new Error("invalid mod");return new t(this.indet,this.ar,e,this.base)}},{key:"getMod",value:function(){return this.mod}},{key:"standard",value:function(){l(this.ar,this.mod)}},{key:"toString",value:function(){return c(this.indet,this.ar,this.deg())+"("+this.mod+")"}},{key:"deg",value:function(){return d(this.ar)}},{key:"isZero",value:function(){return-1==this.deg()}},{key:"leadingK",value:function(){return v(this.ar)}},{key:"add",value:function(e){if(this.indet!=e.indet||this.mod!=e.mod)throw new Error("indetermint mismatch");var r=m(this.ar,e.ar);return new t(this.indet,r,this.mod,this.base)}},{key:"sub",value:function(e){if(this.indet!=e.indet||this.mod!=e.mod)throw new Error("indetermint mismatch");var r=k(this.ar,e.ar);return new t(this.indet,r,this.mod,this.base)}},{key:"mulK",value:function(e){var r=function(t,e){for(var r=t.concat(),n=0;n<r.length;n++)r[n]=r[n]*e;return r}(this.ar,e);return new t(this.indet,r,this.mod,this.base)}},{key:"divK",value:function(e){var r=b(this.ar,e);return new t(this.indet,r,this.mod,this.base)}},{key:"d",value:function(){var e=this.deg();if(e<=0)return new t(this.indet,[0],this.mod,this.base);for(var r=new Array(e).fill(0),n=1;n<=e;n++)r[n-1]=this.ar[n]*n;return new t(this.indet,r,this.mod,this.base)}},{key:"hasSquare",value:function(){var t=this.d();return this.gcd(t).deg()>0}},{key:"squareFree",value:function(){var t=this.d(),e=this.gcd(t);return e.deg()>0?this.divRem(e)[0].toMonic():this.toMonic()}},{key:"gcdK",value:function(){return p(this.ar)}},{key:"gcdDiv",value:function(){if(-1==this.deg())return this;var e=p(this.ar),r=b(this.ar,e);return new t(this.indet,r,this.mod,this.base)}},{key:"mul",value:function(e){if(this.indet!=e.indet||this.mod!=e.mod)throw new Error("indetermint mismatch");if(this.isZero()||e.isZero())return new t(this.indet,[0],this.mod,this.base);for(var r=e.deg(),n=new Array(this.deg()+r+1).fill(0),i=0;i<=r;i++){var a=e.ar[i];0!=a&&y(n,this.ar,a,i)}return new t(this.indet,n,this.mod,this.base)}},{key:"canBeMonic",value:function(){var t=this.leadingK();return 1==t||this.mod==this.base||t%this.base!=0}},{key:"toMonic",value:function(){var e,r=this.leadingK();if(1==r)return this;if(this.mod==this.base)e=h(r,this.mod);else{if(r%this.base==0)throw console.log("cannot change to monic :"+this.toString()),new Error("cannot change to monic");e=h(r,this.mod)}for(var n=this.ar.concat(),i=0;i<n.length;i++)n[i]=n[i]*e;return new t(this.indet,n,this.mod,this.base)}},{key:"gt",value:function(t){if(this.indet!=t.indet||this.mod!=t.mod)throw new Error("indetermint mismatch");return w(this.ar,t.ar)}},{key:"divRem",value:function(e){if(this.indet!=e.indet||this.mod!=e.mod)throw new Error("indetermint mismatch");if(this.isZero())return[new t(this.indet,[0],this.mod,this.base),new t(this.indet,[0],this.mod,this.base)];if(e.isZero())throw new Error("zero divide");return this.deg()<e.deg()?[new t(this.indet,[0],this.mod,this.base),new t(this.indet,this.ar,this.mod,this.base)]:this.base==this.mod?this.divRem1(e):this.divRem2(e)}},{key:"divRem1",value:function(e){for(var r=v(this.ar),n=v(e.ar),i=h(n,this.mod),a=this.deg()-e.deg(),o=new Array(a+1),s=0;s<=a;s++)o[s]=0;var u=r*i%this.mod;o[a]=u;var f=this.ar.concat();for(y(f,e.ar,this.mod-u,a),l(f,this.mod),a=d(f)-e.deg();a>=0;)u=(r=v(f))*i%this.mod,o[a]=u,y(f,e.ar,-u,a),l(f,this.mod),a=d(f)-e.deg();return[new t(this.indet,o,this.mod,this.base),new t(this.indet,f,this.mod,this.base)]}},{key:"divRem2",value:function(e){var r,n,i=v(this.ar),a=v(e.ar),o=!1;if(a%e.base!=0)o=!0,n=i*(r=h(a,this.mod))%this.mod;else{if(i%a!=0)return[new t(this.indet,[0],this.mod,this.base),new t(this.indet,this.ar,this.mod,this.base)];n=Math.trunc(i/a)}for(var s=this.deg()-e.deg(),u=new Array(s+1),f=0;f<=s;f++)u[f]=0;u[s]=n;var c=this.ar.concat();for(y(c,e.ar,-n,s),l(c,this.mod),s=d(c)-e.deg();s>=0;){if(i=v(c),o)n=i*r%this.mod;else{if(i%a!=0)return[new t(this.indet,u,this.mod,this.base),new t(this.indet,c,this.mod,this.base)];n=Math.trunc(i/a)}u[s]=n,y(c,e.ar,-n,s),l(c,this.mod),s=d(c)-e.deg()}return[new t(this.indet,u,this.mod,this.base),new t(this.indet,c,this.mod,this.base)]}},{key:"gcd",value:function(t){if(this.indet!=t.indet||this.mod!=t.mod)throw new Error("indetermint mismatch");if(this.deg()<t.deg())return t.gcd(this);for(var e=this,r=t;!r.isZero();){var n=r;r=e.divRem(r)[1],e=n}return e}},{key:"exGcd",value:function(e){if(this.indet!=e.indet||this.mod!=e.mod)throw new Error("indetermint mismatch");if(this.isZero()||e.isZero())throw new Error("not supported");if(this.deg()<e.deg()){var r=e.exGcd(this);return[r[1],r[0],r[2]]}for(var n=new t(this.indet,[0],this.mod,this.base),i=new t(this.indet,[1],this.mod,this.base),a=this,o=e,s=i,u=n,d=n,f=i;!o.isZero();){var c=a.divRem(o),l=c[0],v=c[1],g=s.sub(l.mul(u)),m=d.sub(l.mul(f));a=o,o=v,s=u,u=g,d=f,f=m}if(0==a.deg()&&1!=a.leadingK()){var w=h(a.leadingK(),this.mod);s=s.mulK(w),d=d.mulK(w),a=a.mulK(w)}return[s,d,a]}},{key:"power",value:function(e){if(e<0||!Number.isInteger(e))throw new Error("not supported");for(var r=this,n=new t(this.indet,[1],this.mod,this.base);0!=e;)e%2==1&&(n=n.mul(r)),r=r.mul(r),e>>=1;return n}},{key:"powerMod",value:function(e,r){if(e<0||!Number.isInteger(e))throw new Error("not supported");if(r.isZero())throw new Error("zero divide");for(var n=this,i=new t(this.indet,[1],this.mod,this.base);0!=e;)e%2==1&&(i=(i=i.mul(n)).divRem(r)[1]),n=(n=n.mul(n)).divRem(r)[1],e>>=1;return i}}],[{key:"fromPolynomial",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return new t(e.indet,e.ar,r,n)}}]),t}();e.Polynomial=K,e.PolynomialMP=P,e.arToString=c,e.arStandard=l,e.arEqual=f,e.arDeg=d,e.arLeadingK=v,e.arMaxK=g,e.arAdd=m,e.arAddMulShift=y,e.arSub=k,e.arGt=w,e.arXn=function(t){for(var e=0;e<t.length;e++)if(0!=t[e])return e;return-1},e.arRandom=M},99:(t,e)=>{function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=function(){function t(){r(this,t)}return i(t,null,[{key:"getPrimes",value:function(){return t.PRIMES.concat()}},{key:"getMaxPrime",value:function(){return t.MaxPrime}},{key:"getPrimesTo",value:function(t){var e=new Array(t+1).fill(1);e[0]=0,e[1]=0;for(var r=2;r<=t;r++)if(1==e[r])for(var n=r,i=2;n*i<=t;i++)e[n*i]=0;var a=[];for(r=0;r<e.length;r++)1==e[r]&&a.push(r);return a}},{key:"integerFactorize",value:function(e){var r=[];if((e=Math.trunc(e))>t.MaxPrime*t.MaxPrime)return r;for(;e>1;)for(var n=0;n<t.PRIMES.length;n++){var i=t.PRIMES[n];if(e%i==0){e/=i,r.push(i);break}}return r}}]),t}();a(o,"PRIMES",[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997]),a(o,"MaxPrime",997);var s=function(){function t(e){r(this,t),this.ar=e.concat(),this.idx=0}return i(t,[{key:"done",value:function(){return this.idx>=Math.pow(2,this.ar.length)}},{key:"reset",value:function(){this.idx=0}},{key:"next",value:function(){if(this.done())return!1;var t=1,e=this.idx,r=0;for(this.idx++;e>0;)e%2==1&&(t*=this.ar[r]),e=Math.trunc(e/2),r++;return t}},{key:"getList",value:function(){for(var t=[];!this.done();){var e=this.next();t.includes(e)||t.push(e)}return t}}]),t}();e.Sosu=o,e.MulCMB=s},841:(t,e)=>{function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=4294967295,i=2147483647,a=2147483647,o=3919453491,s=1123061949,u=2889872383;function h(t){return 26125*(t=(t^t>>>27^t<<19)&i)&n}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.st0=0,this.st1=0,this.st2=0,this.st3=0,this.setSeed(e)}var e,d;return e=t,(d=[{key:"setSeed",value:function(t){if("string"==typeof t||t instanceof String){var e=t.split("").map((function(t){return t.charCodeAt()}));this.setSeedArray(e)}else Array.isArray(t)?this.setSeedArray(t):this.setSeedNumber(t)}},{key:"setSeedNumber",value:function(t){var e=Array(4);e[0]=t&n,e[1]=o,e[2]=s,e[3]=u;for(var r=1;r<8;r++){var h=e[r-1&3];h=h^h>>>30^h<<17,e[3&r]^=r+30157*(h&i)}for(this.st0=e[0],this.st1=e[1],this.st2=e[2],this.st3=e[3],0==(this.st0&a)&&0==this.st1&&0==this.st2&&0==this.st3&&(this.st0="T".charCodeAt(0),this.st1="I".charCodeAt(0),this.st2="N".charCodeAt(0),this.st3="Y".charCodeAt(0)),r=0;r<8;r++)this.next()}},{key:"setSeedArray",value:function(t){if(!Array.isArray(t))throw new Error("TinyMTJS.setSeedArray: Seed type mismatch.");var e,r,d,f,c,l=Array(4);for(f=t.length,l[0]=0,l[1]=o,l[2]=s,l[3]=u,r=f+1>8?f+1:8,d=h(l[0]^l[1]^l[3]),l[1]=l[1]+d&n,d+=f,l[2]=l[2]+d&n,l[0]=d,r--,v=1,e=0;e<r&&f>0;e++)d=h(l[v%4]^l[(v+1)%4]^l[(v+4-1)%4]),l[(v+1)%4]=l[(v+1)%4]+d&n,d=d+t[e%f]+v&n,l[(v+1+1)%4]=l[(v+1+1)%4]+d&n,l[v%4]=d,v=(v+1)%4;for(e=0;e<4;e++)d=559973*(c=((c=l[v%4]+l[(v+1)%4]+l[(v+4-1)%4])^c>>>27^c<<19)&i)&n,l[(v+1)%4]^=d,d-=v,l[(v+1+1)%4]^=d,l[v%4]=d,v=(v+1)%4;this.st0=l[0],this.st1=l[1],this.st2=l[2],this.st3=l[3],0==(this.st0&a)&&0==this.st1&&0==this.st2&&0==this.st3&&(this.st0="T".charCodeAt(0),this.st1="I".charCodeAt(0),this.st2="N".charCodeAt(0),this.st3="Y".charCodeAt(0));for(var v=0;v<8;v++)this.next()}},{key:"getInt31",value:function(){return this.next()>>>1}},{key:"getDouble31",value:function(){return 1*this.getInt31()/2147483648}},{key:"getInt",value:function(t){return Math.floor(this.getDouble31()*t)}},{key:"next",value:function(){var t=this.st3,e=this.st0&a^this.st1^this.st2;t^=t>>>1^(e^=e<<1&n),this.st0=this.st1,this.st1=this.st2,this.st2=e^t<<10&n,this.st3=t,1==(1&t)&&(this.st1^=o,this.st2^=s);var r=this.st3,i=this.st0+(this.st2>>>8)&n;return r^=i,1==(1&i)&&(r^=u),r}}])&&r(e.prototype,d),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.TinyMTJS=d}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}(()=>{var t=r(7),e=r(715),n=t.Polynomial,i=e.KZ,a={};function o(){var t=document.getElementById("indet").value.trim(),e=document.getElementById("keisu").value.trim().split(/ +/).map((function(t){return parseInt(t,10)}));if(e.length>0){a.poly=new n(t[0],e.reverse());var r=document.getElementById("disppoly"),i=a.poly.toDescString();i=i.replaceAll(/\^([0-9]+)/g,"<sup>$1</sup>"),r.innerHTML=i}}function s(){if(a.poly instanceof n){var t=new i(a.poly);t.factorize();var e=t.getStringFactors();e=e.replaceAll(/\^([0-9]+)/g,"<sup>$1</sup>"),document.getElementById("result").innerHTML=e}}a.poly="",window.onload=function(t,e){var r,n,i,a,u;r=window.matchMedia("(prefers-color-scheme: dark)").matches,n=window.sessionStorage.getItem("user"),i=document.documentElement,n?i.setAttribute("theme",n):1==r?i.setAttribute("theme","dark"):i.setAttribute("theme","light"),document.getElementById("changeMode").onclick=function(){"dark"==i.getAttribute("theme")?(i.setAttribute("theme","light"),window.sessionStorage.setItem("user","light")):(i.setAttribute("theme","dark"),window.sessionStorage.setItem("user","dark"))},a=document.getElementById("disp"),u=document.getElementById("factorize"),a.onclick=o,u.onclick=s}})()})();
//# sourceMappingURL=fz-main.js.map