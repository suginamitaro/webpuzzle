(()=>{var e={950:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=["1","2","3","4","5","6"],r=[[0,1,2,3,4,5],[6,7,8,9,10,11],[12,13,14,15,16,17],[18,19,20,21,22,23],[24,25,26,27,28,29],[30,31,32,33,34,35]],s=[[0,6,12,18,24,30],[1,7,13,19,25,31],[2,8,14,20,26,32],[3,9,15,21,27,33],[4,10,16,22,28,34],[5,11,17,23,29,35]],i=[[0,1,2,6,7,8],[3,4,5,9,10,11],[12,13,14,18,19,20],[15,16,17,21,22,23],[24,25,26,30,31,32],[27,28,29,33,34,35]];function o(e){return e%6}function a(e){return Math.floor(e/6)}function l(e,t){var n=o(e),s=a(e),i=Math.floor(3);switch(n>=i?n=n-i+1:n-=i,s>=i?s=s-i+1:s-=i,t){case 0:n=-n;break;case 1:s=-s;break;case 2:n=-n,s=-s}return n>=0?n=n+i-1:n+=i,s>=0?s=s+i-1:s+=i,r[s][n]}function c(e,t,n){for(var r=0;r<6;r++){var s=t[r],i=n[r],o=e[s];e[s]=e[i],e[i]=o}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var d,u;return d=e,(u=[{key:"convert",value:function(e,t){var n=this.randomizeElement(e,t),r=t.getInt(4);3!=r&&(n=this.reverseChange(n,r)),1!=(r=t.getInt(2))&&(n=this.blockReverse(n));for(var s=[],i=0;i<3;i++)s.push(t.getInt(7));return this.lineChange(n,s)}},{key:"getRandomSymbolArray",value:function(e){for(var t=n.slice(),r=0;r<t.length;r++){var s=t[r],i=e.getInt(t.length);t[r]=t[i],t[i]=s}var o=[];for(r=0;r<t.length;r++)o[(r+1).toString()]=t[r];return o[0]="0",o[" "]=" ",o}},{key:"randomizeElement",value:function(e,t){var n=this.getRandomSymbolArray(t);return e.map((function(e){return n[e]}))}},{key:"reverseChange",value:function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=e[l(r,t)];return n}},{key:"blockReverse",value:function(e){for(var t=e.slice(),n=[[0,4],[1,5]],r=0;r<2;r++)c(t,i[n[r][0]],i[n[r][1]]);return t}},{key:"lineChange",value:function(e,t){for(var n=e.slice(),i=[[s[0],s[1]],[s[1],s[2]],[s[3],s[4]],[s[4],s[5]],[r[0],r[1]],[r[2],r[3]],[r[4],r[5]]],o=0;o<t.length;o++)t[o],c(n,i[o][0],i[o][1]);return n}},{key:"setWarn",value:function(e){e.classList.contains("fx")||e.classList.add("w")}},{key:"setPencil",value:function(e){e.classList.contains("fx")||e.classList.add("p")}},{key:"vlCheck",value:function(e,t){for(var n=!1,r=0;r<t.length;r++)for(var s=t[r],i=0;i<t.length;i++){var o=t[i];r!=i&&e[s].textContent==e[o].textContent&&(n=!0,this.setWarn(e[s]),this.setWarn(e[o]))}return!n}},{key:"check",value:function(e){for(var t=!1,n=0;n<e.length;n++)" "==e[n].textContent&&(t=!0,this.setWarn(e[n])),e[n].textContent.length>1&&(t=!0,this.setWarn(e[n]));if(t)return!1;for(var o=[r,s,i],a=0;a<o.length;a++){var l=o[a];for(n=0;n<l.length;n++){var c=l[n];this.vlCheck(e,c)||(t=!0)}}return!t}},{key:"vl_delete",value:function(e,t,n,r){result=r;for(var s=0;s<6;s++)if(t[s]!=n){var i=e[t[s]].textContent;" "!=i&&1==i.length&&(result=result.replace(i,""))}return result}},{key:"delSymbol",value:function(e,t,n){var l,c=n;return c=this.vl_delete(e,r[a(t)],t,c),c=this.vl_delete(e,s[o(t)],t,c),this.vl_delete(e,i[(l=t,2*Math.floor(a(l)/2)+Math.floor(o(l)/3))],t,c)}},{key:"pencilMarkPos",value:function(e,t,n){this.setPencil(e[t]),e[t].textContent=this.delSymbol(e,t,n)}},{key:"pencilMark",value:function(e,t){for(var n=0;n<e.length;n++)" "==e[n].textContent&&(this.setPencil(e[n]),e[n].textContent=this.delSymbol(e,n,t))}}])&&t(d.prototype,u),Object.defineProperty(d,"prototype",{writable:!1}),e}();e.exports=d},993:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=4294967295,r=2147483647,s=2147483647,i=3919453491,o=1123061949,a=2889872383;function l(e){return 26125*(e=(e^e>>>27^e<<19)&r)&n}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.st0=0,this.st1=0,this.st2=0,this.st3=0,this.setSeed(t)}var c,d;return c=e,(d=[{key:"setSeed",value:function(e){if("string"==typeof e||e instanceof String){var t=e.split("").map((function(e){return e.charCodeAt()}));this.setSeedArray(t)}else Array.isArray(e)?this.setSeedArray(e):this.setSeedNumber(e)}},{key:"setSeedNumber",value:function(e){var t=Array(4);t[0]=e&n,t[1]=i,t[2]=o,t[3]=a;for(var l=1;l<8;l++){var c=t[l-1&3];c=c^c>>>30^c<<17,t[3&l]^=l+30157*(c&r)}for(this.st0=t[0],this.st1=t[1],this.st2=t[2],this.st3=t[3],0==(this.st0&s)&&0==this.st1&&0==this.st2&&0==this.st3&&(this.st0="T".charCodeAt(0),this.st1="I".charCodeAt(0),this.st2="N".charCodeAt(0),this.st3="Y".charCodeAt(0)),l=0;l<8;l++)this.next()}},{key:"setSeedArray",value:function(e){if(!Array.isArray(e))throw new Error("TinyMTJS.setSeedArray: Seed type mismatch.");var t,c,d,u,h,m=Array(4);for(u=e.length,m[0]=0,m[1]=i,m[2]=o,m[3]=a,c=u+1>8?u+1:8,d=l(m[0]^m[1]^m[3]),m[1]=m[1]+d&n,d+=u,m[2]=m[2]+d&n,m[0]=d,c--,f=1,t=0;t<c&&u>0;t++)d=l(m[f%4]^m[(f+1)%4]^m[(f+4-1)%4]),m[(f+1)%4]=m[(f+1)%4]+d&n,d=d+e[t%u]+f&n,m[(f+1+1)%4]=m[(f+1+1)%4]+d&n,m[f%4]=d,f=(f+1)%4;for(t=0;t<4;t++)d=559973*(h=((h=m[f%4]+m[(f+1)%4]+m[(f+4-1)%4])^h>>>27^h<<19)&r)&n,m[(f+1)%4]^=d,d-=f,m[(f+1+1)%4]^=d,m[f%4]=d,f=(f+1)%4;this.st0=m[0],this.st1=m[1],this.st2=m[2],this.st3=m[3],0==(this.st0&s)&&0==this.st1&&0==this.st2&&0==this.st3&&(this.st0="T".charCodeAt(0),this.st1="I".charCodeAt(0),this.st2="N".charCodeAt(0),this.st3="Y".charCodeAt(0));for(var f=0;f<8;f++)this.next()}},{key:"getInt31",value:function(){return this.next()>>>1}},{key:"getDouble31",value:function(){return 1*this.getInt31()/2147483648}},{key:"getInt",value:function(e){return Math.floor(this.getDouble31()*e)}},{key:"next",value:function(){var e=this.st3,t=this.st0&s^this.st1^this.st2;e^=e>>>1^(t^=t<<1&n),this.st0=this.st1,this.st1=this.st2,this.st2=t^e<<10&n,this.st3=e,1==(1&e)&&(this.st1^=i,this.st2^=o);var r=this.st3,l=this.st0+(this.st2>>>8)&n;return r^=l,1==(1&l)&&(r^=a),r}}])&&t(c.prototype,d),Object.defineProperty(c,"prototype",{writable:!1}),e}();e.exports=c}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=n(993),r=n(950),s={etitle:"numpl6",jtitle:"ミニナンプレ6",seed:""},i={},o=new r,a={H:"pz.hidden.txt",L:"pz.locked.txt",T:"pz.tuple.txt",X:"pz.xwing.txt",Y:"pz.xywing.txt",Z:"pz.xyzwing.txt"},l=new t(0);var c=function(){function t(e,n,r){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=n.type,this.uniq=this.type+n.uniq,this.type){case"hour":case"min":this.subtitle="random",this.seed=[r,n.uniq,4294967295&e.getTime()];break;default:var s=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();this.subtitle=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t+"-"+("0"+n).substr(-2)+"-"+("0"+r).substr(-2)}(e),this.seed=[r,n.uniq,s,i,o]}var a=function(e,t){var n,r,s,i={},o=new Date(e);switch(t){case"day":o.setHours(23),o.setMinutes(59),o.setSeconds(59),i.seconds=Math.ceil((o.getTime()-e.getTime())/1e3);break;case"hour":o.setMinutes(59),o.setSeconds(59),i.seconds=Math.ceil((o.getTime()-e.getTime())/1e3);break;default:o.setMinutes(10*Math.ceil(e.getMinutes()/10)),o.setSeconds(59),i.seconds=Math.ceil((o.getTime()-e.getTime())/1e3)}return i.text=(r=(n=i.seconds)%60,s=Math.floor(n/60)%60,("0"+Math.floor(n/3600)).substr(-2)+":"+("0"+s).substr(-2)+":"+("0"+r).substr(-2)),i}(e,this.type);this.nokori=a.text,this.seconds=a.seconds,this.time=e.getTime()}var n,r;return n=t,(r=[{key:"finish",value:function(){var e=new Date,t=Math.ceil((e.getTime()-this.time)/1e3),n=t>=this.seconds;this.seconds=n?0:this.seconds-t}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function d(e,t){e.classList.add(t)}function u(e,t){e.classList.remove(t)}function h(e){for(var t=document.getElementById("board").getElementsByTagName("span"),n=0;n<t.length;n++)u(t[n],e)}function m(){if(h("e"),h("w"),!i.owari){var e=this.textContent;!function(e){for(var t=document.getElementById("board").getElementsByTagName("span"),n=0;n<t.length;n++)if(t[n].classList.contains("s")){t[n].textContent=e,t[n].classList.remove("w"),t[n].classList.remove("p");break}}(e),function(e){for(var t=document.getElementById("board").getElementsByTagName("span"),n=0;n<t.length;n++)t[n].textContent.includes(e)&&d(t[n],"e")}(e),h("s")}}function f(){h("e"),i.owari||(function(e){for(var t=document.getElementById("board").getElementsByTagName("span"),n=0;n<t.length;n++)if(t[n].classList.contains("s")){t[n].classList.contains("p")&&(t[n].textContent=t[n].textContent.replace(e,""));break}}(this.textContent),h("s"))}function g(){i.owari||(h("s"),d(this,"s"))}function v(e,t,n,r,s,i){for(var o=0,a=0;a<n;a++){var l=!1;a%2==1&&a!=n-1&&(l=!0);for(var c=0;c<n;c++){var d=document.createElement("span");l&&d.classList.add("b"),c%3==2&&c!=n-1&&d.classList.add("r");var u=t[o++];" "!=u?d.classList.add("fx"):null!=i&&(d.onclick=i),d.textContent=u,e.appendChild(d)}}}function y(e,t,n){for(var r=0;r<t.length;r++){var s=document.createElement("span");s.textContent=t[r],null!=n&&(s.onclick=n),e.appendChild(s)}}function p(){var e=function(e,t,n){for(var r="⬜",s=0;s<t.length;s++)if(t[s].match(/[A-Za-z0-9]/)){r="_";break}var i=e+"\n",o=0;for(s=0;s<t.length;s++)" "==t[s]?i+=r:i+=t[s],s%3==2&&s%6!=5&&(i+=" "),s%6==5&&(i+="\n",o++),2==o&&s<34&&(i+="\n",o=0);return(i+="clear!\n")+(n+"\n")}(s.title,i.problem,location.href);navigator.clipboard&&navigator.clipboard.writeText(e)}function b(){if(!i.owari){for(var e=document.getElementById("board").getElementsByTagName("span"),t="",n=0;n<e.length;n++)t+=e[n].textContent;i.checkCnt++,o.check(e)?(i.answer=t,function(){h("s"),h("e"),h("w");var e=document.getElementById("check");e.disabled=!0,e.hidden=!0,document.getElementById("pen").hidden=!0,document.getElementById("reset").hidden=!0,document.getElementById("key2").hidden=!0;var t=document.getElementById("result"),n=document.getElementById("copy"),r=document.getElementById("nextgame");i.owari=!0,t.hidden=!1,n.hidden=!1,r.hidden=!1,n.disabled=!1;var o,a,l,c,d="";1==i.checkCnt?d="一発クリア、":d+=i.checkCnt+"回試行でのクリア、",t.textContent=d+"おめでとうございます",s.seed.finish(),o=s.etitle+s.seed.uniq,a=i,l=s.seed.seconds,c=encodeURIComponent(JSON.stringify(a)),document.cookie=o+"="+c+"; SameSite=Lax; max-age="+l}()):console.log("check NG")}}function k(){document.getElementById("key2").hidden=!1,document.getElementById("pen").disabled=!0}function w(){var e=document.getElementById("board").getElementsByTagName("span");h("s"),h("e"),o.pencilMark(e,i.keystr)}function E(){if(!i.owari){for(var e=document.getElementById("board").getElementsByTagName("span"),t=0;t<e.length;t++)e[t].classList.contains("fx")||(e[t].classList.remove("w"),e[t].classList.remove("p"),e[t].classList.remove("s"),e[t].textContent=" ");i.checkCnt++}}function I(){var e=document.getElementById("result"),t=document.getElementById("copy"),n=document.getElementById("nextgame");document.getElementById("loading").hidden=!0,e.hidden=!0,t.hidden=!0,n.hidden=!0,e.textContent="",i.checkCnt=0;var r=i.keystr+" ";v(document.getElementById("board"),i.problem,6,0,0,g),y(document.getElementById("key"),r,m);var s=document.getElementById("key2"),o=document.createElement("span");o.textContent="📝",o.onclick=w,s.appendChild(o),y(s,i.keystr,f)}function x(e){var t,n,r,s=e[l.getInt(e.length)];38==s.length&&(s=s.substring(1,37)),t=s=o.convert(s.split(""),l).join(""),n=i.keystr,r=function(e){for(var t=e.split(""),n=[],r=0;r<t.length;r++)n[(r+1).toString()]=t[r];return n[0]="0",n[" "]=" ",n}(n),s=t.split("").map((function(e){return r[e]})).join(""),i.problem=s}function C(e){document.getElementById("file").hidden=!0;var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.addEventListener("load",(function(){var e=this.result.trim(),t=e.split(/\n/),n="problemArray-"+i.level;window.sessionStorage.setItem(n,e),x(t),I(i.level)}))}window.onload=function(){var e,t,n,r,o,d,u;e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=window.sessionStorage.getItem("user"),n=document.documentElement,t?n.setAttribute("theme",t):1==e?n.setAttribute("theme","dark"):n.setAttribute("theme","light"),document.getElementById("changeMode").onclick=function(){"dark"==n.getAttribute("theme")?(n.setAttribute("theme","light"),window.sessionStorage.setItem("user","light")):(n.setAttribute("theme","dark"),window.sessionStorage.setItem("user","dark"))},r=document.getElementById("check"),o=document.getElementById("copy"),d=document.getElementById("pen"),u=document.getElementById("reset"),r.onclick=b,o.onclick=p,d.onclick=k,u.onclick=E;var h=function(){var e={},t=new URLSearchParams(window.location.search);return e.type=t.get("t"),"hour"!=e.type&&"min"!=e.type&&(e.type="day"),t.has("st")?(e.str=t.get("st"),e.str=(e.str+"123456789").substring(0,6)):e.str="123456789".substring(0,6),t.has("uq")?e.uniq=t.get("uq"):e.uniq=1,t.has("l")?e.level=t.get("l"):e.level=H,"http"==window.location.href.substring(0,4)?e.file=!1:e.file=!0,e}();i.level=h.level,i.keystr=h.str;var m=new Date;l.setSeed(i.keystr),s.seed=new c(m,h,l.getInt31()),l.setSeed(s.seed.seed);var f=s.jtitle+i.level+"("+i.keystr+")";document.getElementById("title").textContent=f,s.title=f+s.seed.subtitle;var g=function(e){var t=new Array;if(document.cookie)for(var n=document.cookie.split("; "),r=0;r<n.length;r++){var s=n[r].split("=");t[s[0]]=decodeURIComponent(s[1])}return t[e]||""}(s.etitle+s.seed.uniq);if(!g||(function(e){if(function(e){var t=document.getElementById("board");v(t,e.problem,6,0,0,null),function(e,t){for(var n=e.getElementsByTagName("span"),r=0;r<n.length;r++)" "==n[r].textContent&&(n[r].textContent=t[r])}(t,e.answer);var n=i.keystr+" ";y(document.getElementById("key"),n,null)}(i=JSON.parse(e)),i.owari){document.getElementById("loading").hidden=!0;var t=document.getElementById("check");t.disabled=!0,t.hidden=!0,document.getElementById("pen").hidden=!0,document.getElementById("reset").hidden=!0,document.getElementById("key2").hidden=!0;var n=document.getElementById("copy");n.disabled=!1,n.hidden=!1,document.getElementById("result").textContent="次のゲームまであと "+s.seed.nokori,document.getElementById("nextgame").hidden=!1}}(g),!i.owari)){var w="problemArray-"+i.level,B=window.sessionStorage.getItem(w);if(B)return problemArray=B.split("\n"),x(problemArray),void I();if(h.file){var A=document.getElementById("file");A.hidden=!1,A.addEventListener("change",C)}else{var S=new XMLHttpRequest,T="./data/"+a[i.level];S.open("get",T,!0),S.onload=function(){var e=this.responseText.trim(),t=e.split("\n"),n="problemArray-"+i.level;window.sessionStorage.setItem(n,e),x(t),I(i.level)},S.send(null)}}}})()})();
//# sourceMappingURL=np6-main.js.map